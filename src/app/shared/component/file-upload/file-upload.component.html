<div [ngClass]="getFormControlErrors() && control().touched ? 'has-error' : ''">
    <label class="mb-3 {{ labelStyleClass() ? labelStyleClass() : '' }}" [attr.for]="inputId()"
        >{{ label() }}
        @if (additionalLabel()) {
            <span class="text-gray-600">( {{ additionalLabel() }} )</span>
        }
        @if (isRequired()) {
            <span class="text-danger">*</span>
        }
    </label>
    <ngx-dropzone (change)="onSelect($event)">
        <ngx-dropzone-label class="text-center">
            <icon-file-upload class="w-14"></icon-file-upload>
            <p class="mb-0">اضغط أو اسحب هنا لرفع الملفات</p>
        </ngx-dropzone-label>
        @for (f of files; let i = $index; track f) {
            <ngx-dropzone-preview [removable]="true" (removed)="onRemove(f)">
                <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
            </ngx-dropzone-preview>
        }
    </ngx-dropzone>
    <ng-container *ngIf="getFormControlErrors()">
        <div
            *ngIf="getFormControlErrors() && control()?.touched && showFeedback"
            class="mt-2 text-danger {{ errorStyleClass() ? errorStyleClass() : undefined }}"
        >
            <span *ngIf="getFormControlErrors().required"> خانة {{ label() }} مطلوبة أو غير صالحة. </span>
        </div>
    </ng-container>
    <ng-container *ngIf="remoteFiles().length">
        <div class="flex flex-wrap gap-3 mt-4">
            @for (file of remoteFiles(); let i = $index; track file) {
                <div class="file">
                    <a class="inline-flex gap-1 font-semibold underline" href="{{ file }}" target="_blank" ngxTippy="{{ file }}">
                        <svg enable-background="new 0 0 497 497" height="20" viewBox="0 0 497 497" width="20" xmlns="http://www.w3.org/2000/svg">
                            <g>
                                <path
                                    d="m379.59 450.704h-257.242c-11.046 0-20-8.954-20-20v-369.346h-33.148c-12.103 0-21.914 9.811-21.914 21.914v391.815c0 12.102 9.811 21.913 21.914 21.913h288.477c12.103 0 21.914-9.811 21.914-21.914v-24.382z"
                                    fill="#8ac9fe"
                                ></path>
                                <path
                                    d="m102.348 61.358v369.346c0 11.046 8.954 20 20 20h257.242v24.383c0 4.268-1.225 8.249-3.336 11.617h-271.992c-12.102 0-21.913-9.811-21.913-21.914v-16l10-375.815z"
                                    fill="#60b7ff"
                                ></path>
                                <path
                                    d="m414.652 415.642h-257.242c-11.046 0-20-8.954-20-20v-360.58h-33.148c-12.102 0-21.913 9.811-21.913 21.914v391.814c0 12.103 9.811 21.914 21.913 21.914h288.477c12.103 0 21.914-9.811 21.914-21.914v-33.148z"
                                    fill="#fed402"
                                ></path>
                                <path
                                    d="m137.41 35.062v360.58c0 11.046 8.954 20 20 20h257.242v33.148c0 1.784-.218 3.515-.62 5.175h-274.709c-12.102 0-21.913-9.811-21.913-21.914v-18.323l10-27.665v-345.826z"
                                    fill="#fac600"
                                ></path>
                                <path
                                    d="m425.8 435.642h-286.477c-12.102 0-21.913-9.811-21.913-21.914v-391.814c0-12.103 9.811-21.914 21.913-21.914h221.616l86.774 88.774v324.954c.001 12.103-9.81 21.914-21.913 21.914z"
                                    fill="#efedef"
                                ></path>
                                <path
                                    d="m419.714 58.774v354.954c0 12.103-9.811 21.914-21.913 21.914h30c12.103 0 21.913-9.811 21.913-21.914v-324.954z"
                                    fill="#d7d0d6"
                                ></path>
                                <path d="m449.714 88.774h-66.864c-12.1 0-21.91-9.809-21.91-21.91v-66.864z" fill="#b5adb6"></path>
                                <g>
                                    <path
                                        d="m383.64 169.733h-200.156c-4.142 0-7.5-3.358-7.5-7.5s3.358-7.5 7.5-7.5h200.156c4.142 0 7.5 3.358 7.5 7.5s-3.358 7.5-7.5 7.5z"
                                        fill="#b5adb6"
                                    ></path>
                                </g>
                                <g>
                                    <path
                                        d="m383.64 225.321h-200.156c-4.142 0-7.5-3.358-7.5-7.5s3.358-7.5 7.5-7.5h200.156c4.142 0 7.5 3.358 7.5 7.5s-3.358 7.5-7.5 7.5z"
                                        fill="#b5adb6"
                                    ></path>
                                </g>
                                <g>
                                    <path
                                        d="m383.64 280.909h-200.156c-4.142 0-7.5-3.358-7.5-7.5s3.358-7.5 7.5-7.5h200.156c4.142 0 7.5 3.358 7.5 7.5s-3.358 7.5-7.5 7.5z"
                                        fill="#b5adb6"
                                    ></path>
                                </g>
                            </g>
                        </svg>
                        <span>عرض الملف</span>
                    </a>
                </div>
            }
        </div>
    </ng-container>
</div>
